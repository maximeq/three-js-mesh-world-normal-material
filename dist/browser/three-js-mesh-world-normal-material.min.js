!(function(e, r) {
"object" == typeof exports && "undefined" != typeof module
? (module.exports = r(require("three-full")))
: "function" == typeof define && define.amd
? define(["three-full"], r)
: (e.THREEMeshWorldNormalMaterial = r(e.THREE));
})(this, function(e) {
"use strict";
function r(r) {
((r = r || {}).uniforms = e.UniformsUtils.merge([
e.ShaderLib.normal.uniforms,
{viewMatrixInverse: {value: new e.Matrix4()}}
])),
(r.vertexShader = e.ShaderLib.normal.vertexShader),
(r.fragmentShader =
"uniform mat4 viewMatrixInverse;\n" +
e.ShaderLib.normal.fragmentShader.replace(
"gl_FragColor = ",
"normal = normalize(mat3(viewMatrixInverse) * normal);\ngl_FragColor = "
)),
e.ShaderMaterial.call(this, r);
}
return (
(e = e && e.hasOwnProperty("default") ? e.default : e),
(r.prototype = Object.create(e.ShaderMaterial.prototype)),
(r.prototype.constructor = r),
(r.updateMeshOnBeforeRender = function(e) {
let t = e.onBeforeRender;
e.onBeforeRender = function(e, a, o, n, i, l) {
t.call(this, e, a, o, n, i, l),
this.material instanceof r &&
this.material.uniforms.viewMatrixInverse.value.copy(o.matrixWorld);
};
}),
(e.MeshWorldNormalMaterial = r),
r
);
});
